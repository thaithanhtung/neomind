#!/bin/bash

# Script Ä‘á»ƒ setup environment variables cho Supabase

echo "ðŸš€ Setup Supabase Environment Variables"
echo ""

# Kiá»ƒm tra xem file .env Ä‘Ã£ tá»“n táº¡i chÆ°a
if [ -f .env ]; then
    echo "âš ï¸  File .env Ä‘Ã£ tá»“n táº¡i."
    read -p "Báº¡n cÃ³ muá»‘n ghi Ä‘Ã¨ khÃ´ng? (y/n): " overwrite
    if [ "$overwrite" != "y" ]; then
        echo "âŒ Há»§y bá»."
        exit 0
    fi
fi

echo ""
echo "ðŸ“ Vui lÃ²ng nháº­p thÃ´ng tin Supabase:"
echo ""

# Nháº­p Supabase URL
read -p "Supabase Project URL (vÃ­ dá»¥: https://abc123.supabase.co): " SUPABASE_URL

# Validate URL
if [[ ! $SUPABASE_URL =~ ^https://.*\.supabase\.co$ ]]; then
    echo "âš ï¸  URL khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng. VÃ­ dá»¥: https://abc123.supabase.co"
    read -p "Báº¡n váº«n muá»‘n tiáº¿p tá»¥c? (y/n): " continue
    if [ "$continue" != "y" ]; then
        exit 1
    fi
fi

# Nháº­p Anon Key
read -p "Supabase Anon Key: " SUPABASE_ANON_KEY

# Táº¡o file .env
cat > .env << EOF
# Supabase Configuration
# Generated by setup script on $(date)

VITE_SUPABASE_URL=$SUPABASE_URL
VITE_SUPABASE_ANON_KEY=$SUPABASE_ANON_KEY
EOF

echo ""
echo "âœ… ÄÃ£ táº¡o file .env thÃ nh cÃ´ng!"
echo ""
echo "ðŸ“‹ ThÃ´ng tin Ä‘Ã£ lÆ°u:"
echo "   URL: $SUPABASE_URL"
echo "   Anon Key: ${SUPABASE_ANON_KEY:0:20}..."
echo ""
echo "ðŸ’¡ LÆ°u Ã½: File .env Ä‘Ã£ Ä‘Æ°á»£c thÃªm vÃ o .gitignore vÃ  sáº½ khÃ´ng Ä‘Æ°á»£c commit vÃ o git."
echo ""
echo "ðŸ”„ BÃ¢y giá» báº¡n cÃ³ thá»ƒ cháº¡y: npm run dev"

